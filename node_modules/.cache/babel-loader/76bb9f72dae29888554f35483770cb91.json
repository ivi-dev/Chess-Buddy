{"ast":null,"code":"var _jsxFileName = \"/Users/iliyanvidev/Code/chess-move-parser/src/Panel.js\";\nimport React from 'react';\nimport Input from './Input';\nimport Buttons from './Buttons';\nimport SessionsPanel from './SessionsPanel';\nimport './Panel.css';\nimport MovesHistory from './MovesHistory';\n\nclass Panel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.notationMinLength = 5;\n    this.notationMaxLength = 5;\n    this.state = {\n      moves: [],\n      notationsList: '',\n      error: '',\n      sessionsPanelVisible: false\n    };\n    this.updateNotation = this.updateNotation.bind(this);\n    this.parseNotations = this.parseNotations.bind(this);\n    this.openSessionsPanel = this.openSessionsPanel.bind(this);\n    this.hideSessionsPanel = this.hideSessionsPanel.bind(this);\n  }\n\n  updateNotation(event) {\n    this.setState({\n      error: ''\n    });\n    let notation = event.target.value.trim();\n\n    if (notation.length > 0) {\n      const split = notation.split('');\n      split[0] = split[0].toUpperCase();\n      if (notation.length === 2) split[1] = split[1].toLowerCase();\n      if (notation.length === 4) split[3] = split[3].toLowerCase();\n      this.setState({\n        notation: split.join('')\n      });\n    } else {\n      this.setState({\n        notation: notation\n      });\n    }\n  }\n\n  validateNotation(notation) {\n    const minLength = this.notationMinLength,\n          maxLength = this.notationMaxLength;\n\n    function checkLength() {\n      return notation.length >= minLength && notation.length <= maxLength;\n    }\n\n    function checkComposition() {\n      return notation.match(/^[A-Z-a-z]{1}[A-Z-a-z]{1}\\d{1}[A-Za-z]{1}\\d{1}/i);\n    }\n\n    function checkLegality() {\n      return true;\n    }\n\n    return checkLength() && checkComposition() && checkLegality();\n  }\n\n  getLatestMoveId() {\n    if (this.state.moves.length === 0) return -1;else return this.state.moves[0].id;\n  }\n\n  disectNotation(notation) {\n    const split = notation.split('');\n    return {\n      piece: split[0],\n      from: split[1] + split[2],\n      to: split[3] + split[4]\n    };\n  }\n\n  parseNotations(event) {\n    event.preventDefault();\n\n    if (this.state.notationsList.trim().length > 0) {\n      if (this.validateNotation(this.state.notationsList)) {\n        this.setState(state => {\n          state.moves.unshift({\n            id: this.getLatestMoveId() + 1,\n            notation: this.state.notationsList,\n            side: this.props.side\n          });\n          return {\n            moves: state.moves\n          };\n        }, () => {\n          this.setState({\n            notation: ''\n          });\n          this.props.makeMove(this.disectNotation(this.state.notationsList));\n        });\n      } else {\n        this.setState({\n          error: 'Invalid notation'\n        });\n      }\n    }\n  }\n\n  openSessionsPanel() {\n    this.setState({\n      sessionsPanelVisible: true\n    });\n  }\n\n  hideSessionsPanel() {\n    this.setState({\n      sessionsPanelVisible: false\n    });\n  }\n\n  render() {\n    return React.createElement(\"aside\", {\n      id: \"Panel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(Input, {\n      value: this.state.notationsList,\n      updateNotation: this.updateNotation,\n      parseNotations: this.parseNotations,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }), this.state.error && React.createElement(\"div\", {\n      id: \"Error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, this.state.error), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, this.state.moves.length !== 0 && 'Session History'), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(MovesHistory, {\n      moves: this.state.moves,\n      side: this.props.side,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), React.createElement(Buttons, {\n      openSessionsPanel: this.openSessionsPanel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), React.createElement(SessionsPanel, {\n      visible: this.state.sessionsPanelVisible,\n      hideSessionsPanel: this.hideSessionsPanel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Panel;","map":{"version":3,"sources":["/Users/iliyanvidev/Code/chess-move-parser/src/Panel.js"],"names":["React","Input","Buttons","SessionsPanel","MovesHistory","Panel","Component","constructor","props","notationMinLength","notationMaxLength","state","moves","notationsList","error","sessionsPanelVisible","updateNotation","bind","parseNotations","openSessionsPanel","hideSessionsPanel","event","setState","notation","target","value","trim","length","split","toUpperCase","toLowerCase","join","validateNotation","minLength","maxLength","checkLength","checkComposition","match","checkLegality","getLatestMoveId","id","disectNotation","piece","from","to","preventDefault","unshift","side","makeMove","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Input from './Input'\nimport Buttons from './Buttons'\nimport SessionsPanel from './SessionsPanel'\nimport './Panel.css';\nimport MovesHistory from './MovesHistory';\n\nclass Panel extends React.Component {\n    constructor(props) {\n        super(props);\n        this.notationMinLength = 5;\n        this.notationMaxLength = 5;\n        this.state = {\n            moves: [],\n            notationsList: '',\n            error: '',\n            sessionsPanelVisible: false\n        }\n        this.updateNotation = this.updateNotation.bind(this);\n        this.parseNotations = this.parseNotations.bind(this);\n        this.openSessionsPanel = this.openSessionsPanel.bind(this);\n        this.hideSessionsPanel = this.hideSessionsPanel.bind(this);\n    }\n\n    updateNotation(event) {\n        this.setState({error: ''});\n        let notation = event.target.value.trim();\n        if (notation.length > 0) {\n            const split = notation.split('');\n            split[0] = split[0].toUpperCase();\n            if (notation.length === 2)\n                split[1] = split[1].toLowerCase();\n            if (notation.length === 4)\n                split[3] = split[3].toLowerCase();\n            this.setState({notation: split.join('')});\n        } else {\n            this.setState({notation: notation});\n        }\n    }\n\n    validateNotation(notation) {\n        const minLength = this.notationMinLength, maxLength = this.notationMaxLength;\n        function checkLength() {\n            return notation.length >= minLength && notation.length <= maxLength;\n        }\n        function checkComposition() {\n            return notation.match(/^[A-Z-a-z]{1}[A-Z-a-z]{1}\\d{1}[A-Za-z]{1}\\d{1}/i);\n        }\n        function checkLegality() {\n            return true;\n        }\n        return checkLength() && checkComposition() && checkLegality();\n    }\n\n    getLatestMoveId() {\n        if (this.state.moves.length === 0)\n            return -1;\n        else\n            return this.state.moves[0].id;\n    }\n\n    disectNotation(notation) {\n        const split = notation.split('');\n        return {piece: split[0], from: split[1] + split[2], to: split[3] + split[4]};\n    }\n\n    parseNotations(event) {\n        event.preventDefault();\n        if (this.state.notationsList.trim().length > 0) {\n            if (this.validateNotation(this.state.notationsList)) {\n                this.setState(state => {\n                    state.moves.unshift({id: this.getLatestMoveId() + 1, notation: this.state.notationsList, side: this.props.side}); \n                    return {moves: state.moves}\n                }, () => {this.setState({notation: ''}); this.props.makeMove(this.disectNotation(this.state.notationsList))});\n            } else {\n                this.setState({error: 'Invalid notation'});\n            }\n        }\n    }\n\n    openSessionsPanel() {\n        this.setState({sessionsPanelVisible: true});\n    }\n\n    hideSessionsPanel() {\n        this.setState({sessionsPanelVisible: false});\n    }\n\n    render() {\n        return (\n            <aside id=\"Panel\">\n                <Input value={this.state.notationsList} updateNotation={this.updateNotation} parseNotations={this.parseNotations} />\n                {this.state.error && <div id=\"Error\">{this.state.error}</div>}\n                <h3>{this.state.moves.length !== 0 && 'Session History'}</h3>\n                <hr />\n                <MovesHistory moves={this.state.moves} side={this.props.side} />\n                <Buttons openSessionsPanel={this.openSessionsPanel} />\n                <SessionsPanel visible={this.state.sessionsPanelVisible} hideSessionsPanel={this.hideSessionsPanel} />\n            </aside>\n        );\n    }\n}\n\nexport default Panel;"]},"metadata":{},"sourceType":"module"}