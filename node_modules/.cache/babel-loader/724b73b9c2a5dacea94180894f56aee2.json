{"ast":null,"code":"import _classCallCheck from\"/Users/iliyanvidev/Code/chess-buddy/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/iliyanvidev/Code/chess-buddy/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/iliyanvidev/Code/chess-buddy/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/iliyanvidev/Code/chess-buddy/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/iliyanvidev/Code/chess-buddy/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/iliyanvidev/Code/chess-buddy/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import Move from'./Move';import'./MovesHistory.css';import KeyboardEventHandler from'react-keyboard-event-handler';var MovesHistory=/*#__PURE__*/function(_React$Component){_inherits(MovesHistory,_React$Component);function MovesHistory(props){var _this;_classCallCheck(this,MovesHistory);_this=_possibleConstructorReturn(this,_getPrototypeOf(MovesHistory).call(this,props));_this.state={selectedMove:-1};_this.selectMove=_this.selectMove.bind(_assertThisInitialized(_this));return _this;}_createClass(MovesHistory,[{key:\"selectMove\",value:function selectMove(id){var _this2=this;if(this.state.selectedMove!==id){this.setState({selectedMove:id},function(){if(_this2.props.moves.length>1){_this2.props.fadeOutMoves(_this2.state.selectedMove);_this2.props.updateSituationByMoveId(id);}});}else this.setState({selectedMove:id},function(){_this2.props.resetMovesFade();_this2.props.updateSituationByMoveId(id);});}},{key:\"cycleMoves\",value:function cycleMoves(key){if(this.props.moves.length>1&&this.state.selectedMove!==-1){if(key==='up'){if(this.state.selectedMove<this.props.moves.length)this.selectMove(this.state.selectedMove+1);}else if(key==='down'){if(this.state.selectedMove>1)this.selectMove(this.state.selectedMove-1);}}}},{key:\"getMoveById\",value:function getMoveById(id){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=this.props.moves[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var move=_step.value;if(move.id===id)return move;}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(\"section\",{id:\"MovesHistory\"},React.createElement(KeyboardEventHandler,{handleKeys:['up','down'],onKeyEvent:function onKeyEvent(key){return _this3.cycleMoves(key);}}),this.props.moves.map(function(move){return React.createElement(Move,{key:move.id,notation:move.notation,id:move.id,side:move.side,situation:move.situation,faded:move.faded,selectMove:_this3.selectMove,selected:_this3.state.selectedMove===move.id?true:false});}));}}]);return MovesHistory;}(React.Component);export default MovesHistory;","map":{"version":3,"sources":["/Users/iliyanvidev/Code/chess-buddy/src/MovesHistory.js"],"names":["React","Move","KeyboardEventHandler","MovesHistory","props","state","selectedMove","selectMove","bind","id","setState","moves","length","fadeOutMoves","updateSituationByMoveId","resetMovesFade","key","move","cycleMoves","map","notation","side","situation","faded","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Move from './Move'\nimport './MovesHistory.css';\nimport KeyboardEventHandler from 'react-keyboard-event-handler';\n\nclass MovesHistory extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            selectedMove: -1\n        }\n        this.selectMove = this.selectMove.bind(this);\n    }\n\n    selectMove(id) {\n        if (this.state.selectedMove !== id) {\n            this.setState({selectedMove: id}, () => {\n                if (this.props.moves.length > 1) {\n                    this.props.fadeOutMoves(this.state.selectedMove);\n                    this.props.updateSituationByMoveId(id)\n                }\n            });\n        }\n        else\n            this.setState({selectedMove: id}, () => {\n                this.props.resetMovesFade(); \n                this.props.updateSituationByMoveId(id);\n            });\n    }\n\n    cycleMoves(key) {\n        if (this.props.moves.length > 1 && this.state.selectedMove !== -1) {\n            if (key === 'up') {\n                if (this.state.selectedMove < this.props.moves.length)\n                    this.selectMove(this.state.selectedMove + 1);\n            } else if(key === 'down') {\n                if (this.state.selectedMove > 1)\n                    this.selectMove(this.state.selectedMove - 1);\n            }\n        }\n    }\n    \n    getMoveById(id) {\n        for (let move of this.props.moves)\n            if (move.id === id) return move;\n    }\n\n    render() {\n        return (\n            <section id=\"MovesHistory\">\n                <KeyboardEventHandler handleKeys={['up', 'down']} onKeyEvent={key => this.cycleMoves(key)} />\n                {this.props.moves.map(move => <Move key={move.id} \n                                                    notation={move.notation} \n                                                    id={move.id} \n                                                    side={move.side} \n                                                    situation={move.situation} \n                                                    faded={move.faded}\n                                                    selectMove={this.selectMove}\n                                                    selected={this.state.selectedMove === move.id ? true : false} />)}\n            </section>\n        );\n    }\n}\n\nexport default MovesHistory;"]},"metadata":{},"sourceType":"module"}