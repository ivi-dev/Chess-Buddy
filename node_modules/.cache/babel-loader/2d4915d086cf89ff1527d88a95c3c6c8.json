{"ast":null,"code":"import PouchDB from 'pouchdb-browser';\n\nclass Database {\n  constructor() {\n    this.remoteDBURL = 'http://localhost:5984/';\n    this.dbName = 'chess-moves-parser';\n    this.init();\n  }\n\n  init() {\n    const localDB = PouchDB(this.dbName);\n    const remoteDB = PouchDB(\"\".concat(this.remoteDBURL).concat(this.dbName));\n    localDB.sync(remoteDB, {\n      live: true,\n      retry: true\n    }).on('change', function (info) {\n      this.onSyncChange(info);\n    }).on('paused', function (info) {\n      console.log(\"The sync between local and remote DB's was paused, \\n            possibly due to a lost of connection.\");\n    }).on('active', function (info) {\n      this.onSyncActive(info);\n    }).on('complete', function () {\n      this.onSyncComplete();\n    }).on('error', function (err) {\n      this.onSyncError(err);\n    });\n    localDB.changes({\n      since: 'now'\n    }).on('change', function (change) {\n      this.onDBChange(change);\n    }).on('error', function (err) {\n      this.onDBError(err);\n    });\n  }\n\n  onDBChange(change) {\n    console.log('There was a change in the local database. Something was inserted, removed or updated.');\n  }\n\n  onDBError(err) {\n    console.log('There was an error during a database operation.');\n  }\n\n  onSyncComplete(info) {\n    console.log(\"Local and remote databases' sync process has stopped. \\n        It was either either cancelled manually or finished successfully.\");\n  }\n\n  onSyncChange(info) {\n    console.log(\"There was a change in local and remote databases' synced data. \\n        Something was inserted, removed or updated and is/has been synced across.\");\n  }\n\n  onSyncPause(info) {\n    console.log(\"The sync between local and remote databases was paused, possibly due to a lost of connection.\");\n  }\n\n  onSyncActive(info) {\n    console.log(\"The sync between local and remote databases was has resumed and is now active.\");\n  }\n\n  onSyncError(err) {\n    console.log(\"Error ocurred during the sync of local DB to remote one. \".concat(err));\n  }\n\n}\n\nexport default Database;","map":{"version":3,"sources":["/Users/iliyanvidev/Code/chess-move-parser/src/Database.js"],"names":["PouchDB","Database","constructor","remoteDBURL","dbName","init","localDB","remoteDB","sync","live","retry","on","info","onSyncChange","console","log","onSyncActive","onSyncComplete","err","onSyncError","changes","since","change","onDBChange","onDBError","onSyncPause"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,iBAApB;;AAEA,MAAMC,QAAN,CAAe;AACXC,EAAAA,WAAW,GAAG;AACV,SAAKC,WAAL,GAAmB,wBAAnB;AACA,SAAKC,MAAL,GAAc,oBAAd;AACA,SAAKC,IAAL;AACH;;AAEDA,EAAAA,IAAI,GAAG;AACH,UAAMC,OAAO,GAAGN,OAAO,CAAC,KAAKI,MAAN,CAAvB;AACA,UAAMG,QAAQ,GAAGP,OAAO,WAAI,KAAKG,WAAT,SAAuB,KAAKC,MAA5B,EAAxB;AACAE,IAAAA,OAAO,CAACE,IAAR,CAAaD,QAAb,EACA;AACIE,MAAAA,IAAI,EAAE,IADV;AAEIC,MAAAA,KAAK,EAAE;AAFX,KADA,EAIGC,EAJH,CAIM,QAJN,EAIgB,UAASC,IAAT,EAAe;AAC3B,WAAKC,YAAL,CAAkBD,IAAlB;AACH,KAND,EAMGD,EANH,CAMM,QANN,EAMgB,UAAUC,IAAV,EAAgB;AAC5BE,MAAAA,OAAO,CAACC,GAAR;AAEH,KATD,EASGJ,EATH,CASM,QATN,EASgB,UAAUC,IAAV,EAAgB;AAC5B,WAAKI,YAAL,CAAkBJ,IAAlB;AACH,KAXD,EAWGD,EAXH,CAWM,UAXN,EAWkB,YAAY;AAC1B,WAAKM,cAAL;AACH,KAbD,EAaGN,EAbH,CAaM,OAbN,EAae,UAAUO,GAAV,EAAe;AAC1B,WAAKC,WAAL,CAAiBD,GAAjB;AACH,KAfD;AAgBAZ,IAAAA,OAAO,CAACc,OAAR,CAAgB;AACZC,MAAAA,KAAK,EAAE;AADK,KAAhB,EAEKV,EAFL,CAEQ,QAFR,EAEkB,UAAUW,MAAV,EAAkB;AAChC,WAAKC,UAAL,CAAgBD,MAAhB;AACD,KAJH,EAIKX,EAJL,CAIQ,OAJR,EAIiB,UAAUO,GAAV,EAAe;AAC5B,WAAKM,SAAL,CAAeN,GAAf;AACD,KANH;AAOH;;AAEDK,EAAAA,UAAU,CAACD,MAAD,EAAS;AACfR,IAAAA,OAAO,CAACC,GAAR,CAAY,uFAAZ;AACH;;AAEDS,EAAAA,SAAS,CAACN,GAAD,EAAM;AACXJ,IAAAA,OAAO,CAACC,GAAR,CAAY,iDAAZ;AACH;;AAEDE,EAAAA,cAAc,CAACL,IAAD,EAAO;AACjBE,IAAAA,OAAO,CAACC,GAAR;AAEH;;AAEDF,EAAAA,YAAY,CAACD,IAAD,EAAO;AACfE,IAAAA,OAAO,CAACC,GAAR;AAEH;;AAEDU,EAAAA,WAAW,CAACb,IAAD,EAAO;AACdE,IAAAA,OAAO,CAACC,GAAR;AACH;;AAEDC,EAAAA,YAAY,CAACJ,IAAD,EAAO;AACfE,IAAAA,OAAO,CAACC,GAAR;AACH;;AAEDI,EAAAA,WAAW,CAACD,GAAD,EAAM;AACbJ,IAAAA,OAAO,CAACC,GAAR,oEAAwEG,GAAxE;AACH;;AA/DU;;AAkEf,eAAejB,QAAf","sourcesContent":["import PouchDB from 'pouchdb-browser';\n\nclass Database {\n    constructor() {\n        this.remoteDBURL = 'http://localhost:5984/';\n        this.dbName = 'chess-moves-parser';\n        this.init();\n    }\n    \n    init() {\n        const localDB = PouchDB(this.dbName);\n        const remoteDB = PouchDB(`${this.remoteDBURL}${this.dbName}`);\n        localDB.sync(remoteDB, \n        {\n            live: true,\n            retry: true\n        }).on('change', function(info) {\n            this.onSyncChange(info);\n        }).on('paused', function (info) {\n            console.log(`The sync between local and remote DB\\'s was paused, \n            possibly due to a lost of connection.`);\n        }).on('active', function (info) {\n            this.onSyncActive(info);\n        }).on('complete', function () {\n            this.onSyncComplete();\n        }).on('error', function (err) {\n            this.onSyncError(err);\n        });\n        localDB.changes({\n            since: 'now'\n          }).on('change', function (change) {\n            this.onDBChange(change);\n          }).on('error', function (err) {\n            this.onDBError(err);\n          });\n    }\n\n    onDBChange(change) {\n        console.log('There was a change in the local database. Something was inserted, removed or updated.');\n    }\n\n    onDBError(err) {\n        console.log('There was an error during a database operation.');\n    }\n\n    onSyncComplete(info) {\n        console.log(`Local and remote databases' sync process has stopped. \n        It was either either cancelled manually or finished successfully.`);\n    }\n\n    onSyncChange(info) {\n        console.log(`There was a change in local and remote databases' synced data. \n        Something was inserted, removed or updated and is/has been synced across.`);\n    }\n\n    onSyncPause(info) {\n        console.log(`The sync between local and remote databases was paused, possibly due to a lost of connection.`);\n    }\n\n    onSyncActive(info) {\n        console.log(`The sync between local and remote databases was has resumed and is now active.`);\n    }\n\n    onSyncError(err) {\n        console.log(`Error ocurred during the sync of local DB to remote one. ${err}`);\n    }\n}\n\nexport default Database;"]},"metadata":{},"sourceType":"module"}