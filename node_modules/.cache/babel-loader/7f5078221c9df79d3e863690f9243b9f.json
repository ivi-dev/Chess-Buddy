{"ast":null,"code":"import PouchDB from 'pouchdb-browser';\n\nclass Database {\n  constructor() {\n    this.remoteDBURL = 'http://localhost:5984/';\n    this.dbName = 'chess-moves-parser';\n    this.init();\n  }\n\n  init() {\n    console.log(1);\n    const localDB = PouchDB(this.dbName);\n    const remoteDB = PouchDB(\"\".concat(this.remoteDBURL).concat(this.dbName));\n    localDB.sync(remoteDB, {\n      live: true,\n      retry: true\n    }).on('change', function (info) {\n      this.onSyncChange(info);\n    }).on('paused', function (info) {\n      console.log(\"The sync between local and remote databases was paused, either manually due to a lost of connection.\");\n    }).on('active', function (info) {\n      this.onSyncActive(info);\n    }).on('complete', function () {\n      this.onSyncComplete();\n    }).on('error', function (err) {\n      this.onSyncError(err);\n    });\n    localDB.changes({\n      since: 'now'\n    }).on('change', function (change) {\n      this.onDBChange(change);\n    }).on('error', function (err) {\n      this.onDBError(err);\n    });\n  }\n\n  onDBChange(change) {\n    console.log('There was a change in the local database. Something was inserted, removed or updated.');\n  }\n\n  onDBError(err) {\n    console.log('There was an error during a database operation.');\n  }\n\n  onSyncComplete(info) {\n    console.log(\"Local and remote databases' sync process has stopped. \\n        It was either either cancelled manually or finished successfully.\");\n  }\n\n  onSyncChange(info) {\n    console.log(\"There was a change in local and remote databases' synced data. \\n        Something was inserted, removed or updated and is/has been synced across.\");\n  } // onSyncPause(info) {\n  //     console.log(`The sync between local and remote databases was paused, either manually due to a lost of connection.`);\n  // }\n\n\n  onSyncActive(info) {\n    console.log(\"The sync between local and remote databases was has resumed and is now active.\");\n  }\n\n  onSyncError(err) {\n    console.log(\"Error ocurred during the sync of local DB to remote one. \".concat(err));\n  }\n\n}\n\nexport default Database;","map":{"version":3,"sources":["/Users/iliyanvidev/Code/chess-move-parser/src/Database.js"],"names":["PouchDB","Database","constructor","remoteDBURL","dbName","init","console","log","localDB","remoteDB","sync","live","retry","on","info","onSyncChange","onSyncActive","onSyncComplete","err","onSyncError","changes","since","change","onDBChange","onDBError"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,iBAApB;;AAEA,MAAMC,QAAN,CAAe;AACXC,EAAAA,WAAW,GAAG;AACV,SAAKC,WAAL,GAAmB,wBAAnB;AACA,SAAKC,MAAL,GAAc,oBAAd;AACA,SAAKC,IAAL;AACH;;AAEDA,EAAAA,IAAI,GAAG;AACHC,IAAAA,OAAO,CAACC,GAAR,CAAY,CAAZ;AACA,UAAMC,OAAO,GAAGR,OAAO,CAAC,KAAKI,MAAN,CAAvB;AACA,UAAMK,QAAQ,GAAGT,OAAO,WAAI,KAAKG,WAAT,SAAuB,KAAKC,MAA5B,EAAxB;AACAI,IAAAA,OAAO,CAACE,IAAR,CAAaD,QAAb,EACA;AACIE,MAAAA,IAAI,EAAE,IADV;AAEIC,MAAAA,KAAK,EAAE;AAFX,KADA,EAIGC,EAJH,CAIM,QAJN,EAIgB,UAASC,IAAT,EAAe;AAC3B,WAAKC,YAAL,CAAkBD,IAAlB;AACH,KAND,EAMGD,EANH,CAMM,QANN,EAMgB,UAAUC,IAAV,EAAgB;AAC5BR,MAAAA,OAAO,CAACC,GAAR;AACH,KARD,EAQGM,EARH,CAQM,QARN,EAQgB,UAAUC,IAAV,EAAgB;AAC5B,WAAKE,YAAL,CAAkBF,IAAlB;AACH,KAVD,EAUGD,EAVH,CAUM,UAVN,EAUkB,YAAY;AAC1B,WAAKI,cAAL;AACH,KAZD,EAYGJ,EAZH,CAYM,OAZN,EAYe,UAAUK,GAAV,EAAe;AAC1B,WAAKC,WAAL,CAAiBD,GAAjB;AACH,KAdD;AAeAV,IAAAA,OAAO,CAACY,OAAR,CAAgB;AACZC,MAAAA,KAAK,EAAE;AADK,KAAhB,EAEKR,EAFL,CAEQ,QAFR,EAEkB,UAAUS,MAAV,EAAkB;AAChC,WAAKC,UAAL,CAAgBD,MAAhB;AACD,KAJH,EAIKT,EAJL,CAIQ,OAJR,EAIiB,UAAUK,GAAV,EAAe;AAC5B,WAAKM,SAAL,CAAeN,GAAf;AACD,KANH;AAOH;;AAEDK,EAAAA,UAAU,CAACD,MAAD,EAAS;AACfhB,IAAAA,OAAO,CAACC,GAAR,CAAY,uFAAZ;AACH;;AAEDiB,EAAAA,SAAS,CAACN,GAAD,EAAM;AACXZ,IAAAA,OAAO,CAACC,GAAR,CAAY,iDAAZ;AACH;;AAEDU,EAAAA,cAAc,CAACH,IAAD,EAAO;AACjBR,IAAAA,OAAO,CAACC,GAAR;AAEH;;AAEDQ,EAAAA,YAAY,CAACD,IAAD,EAAO;AACfR,IAAAA,OAAO,CAACC,GAAR;AAEH,GAnDU,CAqDX;AACA;AACA;;;AAEAS,EAAAA,YAAY,CAACF,IAAD,EAAO;AACfR,IAAAA,OAAO,CAACC,GAAR;AACH;;AAEDY,EAAAA,WAAW,CAACD,GAAD,EAAM;AACbZ,IAAAA,OAAO,CAACC,GAAR,oEAAwEW,GAAxE;AACH;;AA/DU;;AAkEf,eAAejB,QAAf","sourcesContent":["import PouchDB from 'pouchdb-browser';\n\nclass Database {\n    constructor() {\n        this.remoteDBURL = 'http://localhost:5984/';\n        this.dbName = 'chess-moves-parser';\n        this.init();\n    }\n    \n    init() {\n        console.log(1)\n        const localDB = PouchDB(this.dbName);\n        const remoteDB = PouchDB(`${this.remoteDBURL}${this.dbName}`);\n        localDB.sync(remoteDB, \n        {\n            live: true,\n            retry: true\n        }).on('change', function(info) {\n            this.onSyncChange(info);\n        }).on('paused', function (info) {\n            console.log(`The sync between local and remote databases was paused, either manually due to a lost of connection.`);\n        }).on('active', function (info) {\n            this.onSyncActive(info);\n        }).on('complete', function () {\n            this.onSyncComplete();\n        }).on('error', function (err) {\n            this.onSyncError(err);\n        });\n        localDB.changes({\n            since: 'now'\n          }).on('change', function (change) {\n            this.onDBChange(change);\n          }).on('error', function (err) {\n            this.onDBError(err);\n          });\n    }\n\n    onDBChange(change) {\n        console.log('There was a change in the local database. Something was inserted, removed or updated.');\n    }\n\n    onDBError(err) {\n        console.log('There was an error during a database operation.');\n    }\n\n    onSyncComplete(info) {\n        console.log(`Local and remote databases' sync process has stopped. \n        It was either either cancelled manually or finished successfully.`);\n    }\n\n    onSyncChange(info) {\n        console.log(`There was a change in local and remote databases' synced data. \n        Something was inserted, removed or updated and is/has been synced across.`);\n    }\n\n    // onSyncPause(info) {\n    //     console.log(`The sync between local and remote databases was paused, either manually due to a lost of connection.`);\n    // }\n\n    onSyncActive(info) {\n        console.log(`The sync between local and remote databases was has resumed and is now active.`);\n    }\n\n    onSyncError(err) {\n        console.log(`Error ocurred during the sync of local DB to remote one. ${err}`);\n    }\n}\n\nexport default Database;"]},"metadata":{},"sourceType":"module"}