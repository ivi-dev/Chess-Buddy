{"ast":null,"code":"import PouchDB from 'pouchdb-browser';\n\nclass Database {\n  constructor() {\n    // this.remoteDBURL = 'http://localhost:5984/';\n    this.dbName = 'chess-moves-parser';\n    this.init();\n  }\n\n  init() {\n    const localDB = PouchDB(this.dbName, {\n      auto_compaction: true\n    }); // const remoteDB = PouchDB(`${this.remoteDBURL}${this.dbName}`);\n    // localDB.sync(remoteDB, \n    // {\n    //     live: true,\n    //     retry: true\n    // }).on('change', function(info) {\n    //     this.onSyncChange(info);\n    // }).on('paused', function (info) {\n    //     console.log(`DB_SYNC::Data sync between local and remote databases was paused, either manually due to a lost of connection.`);\n    // }).on('active', function (info) {\n    //     this.onSyncActive(info);\n    // }).on('complete', function () {\n    //     this.onSyncComplete();\n    // }).on('error', function (err) {\n    //     this.onSyncError(err);\n    // });\n\n    localDB.changes({\n      live: true,\n      since: 'now'\n    }).on('change', function (change) {\n      this.onDBChange(change);\n    }).on('error', function (err) {\n      this.onDBError(err);\n    });\n  }\n\n  onDBChange(change) {\n    console.log(\"DB_EVENT::There was a change in the local database. Something was inserted, removed or updated.\");\n  }\n\n  onDBError(err) {\n    console.log('DB_EVENT::There was an error during a database operation.');\n  }\n\n  onSyncComplete(info) {\n    console.log(\"DB_SYNC::A local and remote databases' data sync process has stopped. It was either either cancelled manually or finished successfully.\");\n  }\n\n  onSyncChange(info) {\n    console.log(\"DB_SYNC::A data sync started between local and remote databases.\");\n  } // onSyncPause(info) {\n  //     console.log(`The sync between local and remote databases was paused, either manually due to a lost of connection.`);\n  // }\n\n\n  onSyncActive(info) {\n    console.log(\"DB_SYNC::A data sync between local and remote databases was has resumed.\");\n  }\n\n  onSyncError(err) {\n    console.log(\"DB_SYNC::Error ocurred during the sync of local and remote databases.\");\n  }\n\n}\n\nexport default Database;","map":{"version":3,"sources":["/Users/iliyanvidev/Code/chess-move-parser/src/Database.js"],"names":["PouchDB","Database","constructor","dbName","init","localDB","auto_compaction","changes","live","since","on","change","onDBChange","err","onDBError","console","log","onSyncComplete","info","onSyncChange","onSyncActive","onSyncError"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,iBAApB;;AAEA,MAAMC,QAAN,CAAe;AACXC,EAAAA,WAAW,GAAG;AACV;AACA,SAAKC,MAAL,GAAc,oBAAd;AACA,SAAKC,IAAL;AACH;;AAEDA,EAAAA,IAAI,GAAG;AACH,UAAMC,OAAO,GAAGL,OAAO,CAAC,KAAKG,MAAN,EAAc;AAACG,MAAAA,eAAe,EAAE;AAAlB,KAAd,CAAvB,CADG,CAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAD,IAAAA,OAAO,CAACE,OAAR,CAAgB;AACZC,MAAAA,IAAI,EAAE,IADM;AAEZC,MAAAA,KAAK,EAAE;AAFK,KAAhB,EAGKC,EAHL,CAGQ,QAHR,EAGkB,UAAUC,MAAV,EAAkB;AAChC,WAAKC,UAAL,CAAgBD,MAAhB;AACD,KALH,EAKKD,EALL,CAKQ,OALR,EAKiB,UAAUG,GAAV,EAAe;AAC5B,WAAKC,SAAL,CAAeD,GAAf;AACD,KAPH;AAQH;;AAEDD,EAAAA,UAAU,CAACD,MAAD,EAAS;AACfI,IAAAA,OAAO,CAACC,GAAR;AACH;;AAEDF,EAAAA,SAAS,CAACD,GAAD,EAAM;AACXE,IAAAA,OAAO,CAACC,GAAR,CAAY,2DAAZ;AACH;;AAEDC,EAAAA,cAAc,CAACC,IAAD,EAAO;AACjBH,IAAAA,OAAO,CAACC,GAAR;AACH;;AAEDG,EAAAA,YAAY,CAACD,IAAD,EAAO;AACfH,IAAAA,OAAO,CAACC,GAAR;AACH,GAjDU,CAmDX;AACA;AACA;;;AAEAI,EAAAA,YAAY,CAACF,IAAD,EAAO;AACfH,IAAAA,OAAO,CAACC,GAAR;AACH;;AAEDK,EAAAA,WAAW,CAACR,GAAD,EAAM;AACbE,IAAAA,OAAO,CAACC,GAAR;AACH;;AA7DU;;AAgEf,eAAef,QAAf","sourcesContent":["import PouchDB from 'pouchdb-browser';\n\nclass Database {\n    constructor() {\n        // this.remoteDBURL = 'http://localhost:5984/';\n        this.dbName = 'chess-moves-parser';\n        this.init();\n    }\n    \n    init() {\n        const localDB = PouchDB(this.dbName, {auto_compaction: true});\n        // const remoteDB = PouchDB(`${this.remoteDBURL}${this.dbName}`);\n        // localDB.sync(remoteDB, \n        // {\n        //     live: true,\n        //     retry: true\n        // }).on('change', function(info) {\n        //     this.onSyncChange(info);\n        // }).on('paused', function (info) {\n        //     console.log(`DB_SYNC::Data sync between local and remote databases was paused, either manually due to a lost of connection.`);\n        // }).on('active', function (info) {\n        //     this.onSyncActive(info);\n        // }).on('complete', function () {\n        //     this.onSyncComplete();\n        // }).on('error', function (err) {\n        //     this.onSyncError(err);\n        // });\n        localDB.changes({\n            live: true,\n            since: 'now'\n          }).on('change', function (change) {\n            this.onDBChange(change);\n          }).on('error', function (err) {\n            this.onDBError(err);\n          });\n    }\n\n    onDBChange(change) {\n        console.log(`DB_EVENT::There was a change in the local database. Something was inserted, removed or updated.`);\n    }\n\n    onDBError(err) {\n        console.log('DB_EVENT::There was an error during a database operation.');\n    }\n\n    onSyncComplete(info) {\n        console.log(`DB_SYNC::A local and remote databases' data sync process has stopped. It was either either cancelled manually or finished successfully.`);\n    }\n\n    onSyncChange(info) {\n        console.log(`DB_SYNC::A data sync started between local and remote databases.`);\n    }\n\n    // onSyncPause(info) {\n    //     console.log(`The sync between local and remote databases was paused, either manually due to a lost of connection.`);\n    // }\n\n    onSyncActive(info) {\n        console.log(`DB_SYNC::A data sync between local and remote databases was has resumed.`);\n    }\n\n    onSyncError(err) {\n        console.log(`DB_SYNC::Error ocurred during the sync of local and remote databases.`);\n    }\n}\n\nexport default Database;"]},"metadata":{},"sourceType":"module"}